To Do List

5/26/18:
    *Refactored PV calculations to do math on annual basis. No errors. Suggestions seem to make sense. PV for various strategies very close to that calculated by monthly version.
    *Same PV is calculated with monthly version and annual version whenever filing dates are same month of year as that person's DoB. Otherwise they are *slightly* different.
        *I suspect this is because the monthly version just treated people as a given age for a whole year, whereas annual version weights the two ages (prior and next) for probability calc.
            Ex: somebody files at 62 and 6 months. Old version said they were 62 for those 62 months, then 63 for next 12 months. New version says they're "63" for first 12 months, which is more accurate.
                That is, I think new (annual) version is actually more accurate.

Error case??
    Spouse A 4/15/1953, 700 PIA, SS mort table
    Spouse B 10/15/1953, 1000 PIA, SS mort table
    .01 discount rate
    Appropriately suggests spouseB wait until 70 and do a restricted application at FRA.
    But when testing various start-dates for spouseA, 10/2018 is too high relative to the November value.
        Relative to Sept, it looks fine. But there shouldn't be a drop-off for 11/2018, as it doesn't mess up restricted app at all.
    Same sort of thing happens with 4/15/1954 and 6/15/1954 DoBs. SpouseA has a dropoff when looking at a July start-date as opposed to June.
    Of note, "dropoff" may be too strong of a word. It's a bigger jump than other 1-month changes. But it's still a 0.2% change in total PV. Nothing especially huge.





Current list of simplifications:
*Currently assuming that widow(er)s don't file for survivor benefits until their survivorFRA. This ignores restricted application strategies.
    For users who are both still alive when filling out form, this has what effect? Understates PV of all claiming combinations somewhat. But does it distort suggestion in either direction?
    This is a bigger issue for people who are already widowed/widowered when filling out form. Need another option for marital status to show them best strategy for their circumstances.
*Currently does not account for child benefits (or spousal benefits for somebody younger than 62 with child in care)
*Currently does not account for disability benefits
*Currently does not account for earnings test
*Benefits are currently discounted to age 62 when calculating PV. If user is over age 62 when filling out form, should only be discounted back to today's date.
    (This simplification shouldn't affect suggestions at all. Will just make result of affected NPV calculations somewhat lower than they really should be.)
*Currently, for sake of calculating AMOUNT of survivor benefit, assuming that deceased spouse at least survived to their intended retirement/spousal claiming age.
    NOT making that assumption though in terms of calculating *whether* a given benefit is received per month.




Remaining To-Do:

Should "About" page be an FAQ page instead?

Get a 404 page functioning. And ideally make it so it doesn't 404 upon reloading /about (or other URL)

Resolve the security issue mentioned by GitHub ("hoek" version, which has been updated in package-lock.json to a newer version)

Work through various simplifications to remove them (or remove them at user's option)

Possible options to improve performance:
    *Recalculate mortality tables so they are not lives remaining but the actual probability. That way it can just be a lookup, rather than two lookups and a calculation.
    *Calculate discount factors for x years into future, then make an array with those, and do a lookup and multiply, in case that's faster than exponent.
        

Smoker/nonsmoker mortality reference:
https://www.soa.org/resources/experience-studies/2015/2017-cso-tables/

"ALB" is age last birthday, which is the one we want.
    Want to use "unloaded" tables, I think. Unloaded reflects lower rates of death. "Loaded" is for giving life insurers a buffer, I think. See top of page 4 here:
    https://www.soa.org/Files/Research/Exp-Study/research-2017-cso-report.pdf
    When looking at the spreadsheets (other than "ultimate" tables), look for attained age in far right column, then "ultimate" number of deaths per 1000 lives in column immediately to left.
        This "ultimate" number of deaths is what is used in the "ultimate" tables, which match the SSA table relatively closely.

FRED API key:
b39e304b95c9e4418bb1faf798c0ba53

https://api.stlouisfed.org/fred/series/observations?series_id=DFII20&api_key=b39e304b95c9e4418bb1faf798c0ba53&file_type=json&limit=1&sort_order=desc
