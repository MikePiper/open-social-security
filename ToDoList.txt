To Do List

4/19/18 this is a fully functional version that takes in birthdate, PIA, gender, and discount rate and outputs the ideal claiming age for a single person.
Also can calculate PV for claiming at an age of user's choice.
5/5/18: Appears to properly calculate PV for a couple (including retirement and spousal benefits) given a pair of claiming dates. Have run assortment of tests (using age 62, FRA, or 70), and all give same PV as excel.
5/7/18: Couple PV maximizer shows values that are plausible -- seem to respond appropriately to changes in discount rate. Should test further though.


Current list of simplifications:
*Currently applies new "deemed filing" rules to everybody regardless of birthdate.
*Currently ignores the "must be 62 for entire month" rule with regard to a person claiming as early as possible.
*Currently for purpose of discounting, all benefits are assumed to be received mid-year rather than discounted monthly.
*Currently uses SSA 2014 period life table, which understates life expectancy relative to cohort table. Also doesn't allow for input regarding health status.
*Benefits are currently discounted to age 62 when calculating PV. If user is over age 62 when filling out form, should only be discounted back to today's date.
    (This simplification shouldn't affect suggestions at all. Will just make result of affected NPV calculations somewhat lower than they really should be.)





Remaining To-Do:

Refactor so that "benefitMonth" and "benefitYear" are not their own variables that constantly have to be set? Just use dates for everything??

Add functionality to find best combination of claiming ages (ignoring survivor benefits)

Create function to calculate a survivor benefit.

Incorporate survivor benefit into total NPV function.

Create function that runs prior function (NPV calculation) for every possible combination of claiming ages

Allow for restricted applications for people age 62 or over as of 1/1/2016

Make output somewhere other than in console.


Error case:
Spouse A, 4/8/88 DoB. 1000 PIA
Spouse B, 4/28/84 DoB, 0 PIA
Says spouseA on 4/1/2051, spouseB on 4/1/2046, despite the fact that SpouseB wouldn't actually get anything on that date -- couldn't even file.
    (Essentially it's just saying that SpouseB should file as soon as possible.)
Note that it gives same PV for the combination it recommends as it does for 4/1/2051 and 4/1/2051 as combination, which makes sense. This is earliest point on which SpouseB can actually get something.
    So math seems fine, but we need to edit the recommended dates in such a case.
If spouseB is given a PIA of even $0.01, it now gets the dates correct, because it now sees the downside of SpouseB filing earlier.