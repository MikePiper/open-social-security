To Do List

5/14/18:
    *Now applies validation with regard to deemed filing rules (old and new) for spousal benefit input dates.
    *Uses spousal benefit input dates in calculation of a single NPV figure.
    *MaximizePV function doesn't work at the moment. Hasn't been refactored to use spousalBenefitDates that are separate from retirementBenefitDates
    *Should do more testing of spousal date validation, as well as of benefit/NPV calculation.
5/16/18:
    *Did some additional testing of the spousal date validation, as well as of month-by-month benefits in various scenarios. Should do more testing of NPV calc also.
    *Possible testing errors notwithstanding, appears to be a fully functional version that calculates recommended strategy for a couple, including restricted application if applicable.
5/18/18:
    *Did additional "directional" testing for couples eligible for restricted app strategies, for couples not eligible, and for couples with 1 person eligible.
        All suggestions seem appropriate, and respond in appropriate direction to changes in inputs.
    *Did actual NPV spreadsheet calculation for pair of people, both FRA 67 and both same age, both claiming at 67 then both claiming at 70, with various PIA combinations. App results matched spreadsheet.
5/26/18:
    *Refactored function to calc single person PV to do math on annual basis instead of monthly. Gives same exact PV if filing at FRA.
        *Slight differences at other ages, but the difference from one month to the next as you increment input claiming age is very reasonable. Looks good.
        *Maximize single person PV function seems to work properly with no changes. Suggests same month as it did when math was done on monthly basis.


Current list of simplifications:
*Currently assuming that widow(er)s don't file for survivor benefits until their survivorFRA. This ignores restricted application strategies.
    For users who are both still alive when filling out form, this has what effect? Understates PV of all claiming combinations somewhat. But does it distort suggestion in either direction?
    This is a bigger issue for people who are already widowed/widowered when filling out form. Need another option for marital status to show them best strategy for their circumstances.
*Currently does not account for child benefits (or spousal benefits for somebody younger than 62 with child in care)
*Currently does not account for disability benefits
*Currently does not account for earnings test
*Currently for purpose of discounting, all benefits are assumed to be received mid-year rather than discounted monthly.
*Benefits are currently discounted to age 62 when calculating PV. If user is over age 62 when filling out form, should only be discounted back to today's date.
    (This simplification shouldn't affect suggestions at all. Will just make result of affected NPV calculations somewhat lower than they really should be.)
*Currently, for sake of calculating AMOUNT of survivor benefit, assuming that deceased spouse at least survived to their intended retirement/spousal claiming age.
    NOT making that assumption though in terms of calculating *whether* a given benefit is received per month.




Remaining To-Do:

Should "About" page be an FAQ page instead?

Get a 404 page functioning. And ideally make it so it doesn't 404 upon reloading /about (or other URL)

Resolve the security issue mentioned by GitHub ("hoek" version, which has been updated in package-lock.json to a newer version)

Work through various simplifications to remove them (or remove them at user's option)

For performance's sake, could refactor so everything is calculated on annual basis? Not sure how that would look.
    *Still look at all of the options by month. But then calcs are done by year, with some being a portion of a year? Is that even faster? We'd need additional "if" type logic to account for partial years here and there.
    

Smoker/nonsmoker mortality reference:
https://www.soa.org/resources/experience-studies/2015/2017-cso-tables/

"ALB" is age last birthday, which is the one we want.
    Want to use "unloaded" tables, I think. Unloaded reflects lower rates of death. "Loaded" is for giving life insurers a buffer, I think. See top of page 4 here:
    https://www.soa.org/Files/Research/Exp-Study/research-2017-cso-report.pdf
    When looking at the spreadsheets (other than "ultimate" tables), look for attained age in far right column, then "ultimate" number of deaths per 1000 lives in column immediately to left.
        This "ultimate" number of deaths is what is used in the "ultimate" tables, which match the SSA table relatively closely.

FRED API key:
b39e304b95c9e4418bb1faf798c0ba53

https://api.stlouisfed.org/fred/series/observations?series_id=DFII20&api_key=b39e304b95c9e4418bb1faf798c0ba53&file_type=json&limit=1&sort_order=desc
