To Do List

5/14/18:
    *Now applies validation with regard to deemed filing rules (old and new) for spousal benefit input dates.
    *Uses spousal benefit input dates in calculation of a single NPV figure.
    *MaximizePV function doesn't work at the moment. Hasn't been refactored to use spousalBenefitDates that are separate from retirementBenefitDates
    *Should do more testing of spousal date validation, as well as of benefit/NPV calculation.
5/16/18:
    * Did some additional testing of the spousal date validation, as well as of month-by-month benefits in various scenarios. Should do more testing of NPV calc also.
    *Possible testing errors notwithstanding, appears to be a fully functional version that calculates recommended strategy for a couple, including restricted application if applicable.



Current list of simplifications:
*Currently assuming that widow(er)s don't file for survivor benefits until their survivorFRA. This ignores restricted application strategies.
*Currently uses SSA 2014 period life table, which understates life expectancy relative to cohort table. Also doesn't allow for input regarding health status.
*Currently ignores the "must be 62 for entire month" rule with regard to a person claiming as early as possible.
*Currently does not account for child benefits (or spousal benefits for somebody younger than 62 with child in care)
*Currently does not account for disability benefits
*Currently does not account for GPO
*Currently does not account for earnings test
*Currently for purpose of discounting, all benefits are assumed to be received mid-year rather than discounted monthly.
*Benefits are currently discounted to age 62 when calculating PV. If user is over age 62 when filling out form, should only be discounted back to today's date.
    (This simplification shouldn't affect suggestions at all. Will just make result of affected NPV calculations somewhat lower than they really should be.)
*Currently, for sake of calculating AMOUNT of survivor benefit, assuming that deceased spouse at least survived to their intended retirement/spousal claiming age.
    NOT making that assumption though in terms of calculating *whether* a given benefit is received per month.




Remaining To-Do:

More testing of calculateCouplePV function (test spousal benefit input validation, benefit amounts, and NPV)

More testing of maximizeCouplePV function

Work through various simplifications to remove them (or remove them at user's option)

For performance's sake, could refactor so everything is calculated on annual basis? Not sure how that would look.
    *Still look at all of the options by month. But then calcs are done by year, with some being a portion of a year? Is that even faster? We'd need additional "if" type logic to account for partial years here and there.
    


Error case:
Spouse A, 4/8/88 DoB. 1000 PIA
Spouse B, 4/28/84 DoB, 0 PIA
Says spouseA on 4/1/2051, spouseB on 4/1/2046, despite the fact that SpouseB wouldn't actually get anything on that date -- couldn't even file.
    (Essentially it's just saying that SpouseB should file as soon as possible.)
Note that it gives same PV for the combination it recommends as it does for 4/1/2051 and 4/1/2051 as combination, which makes sense. This is earliest point on which SpouseB can actually get something.
    So math seems fine, but we need to edit the recommended dates in such a case.
If spouseB is given a PIA of even $0.01, it now gets the dates correct, because it now sees the downside of SpouseB filing earlier.