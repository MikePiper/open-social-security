<div id="container" class="container">
<form #inputForm="ngForm" (ngSubmit)="onSubmit()">
      <div>
        <label for="advanced">Advanced Options</label>
        <input type="checkbox" [(ngModel)]="advanced" id="advanced" name="advanced" value="true">
      </div>
        <h2>Your Information</h2>
        <div class="form-inline">
          <label>Marital status</label>
          <select [(ngModel)]="maritalStatus" name="maritalStatus" class="form-control">
            <option value="unmarried">Single</option>
            <option value="married">Married</option>
            <option value="divorced">Divorced</option>
            <option value="survivor">Widow(er)</option>
          </select>
        <div *ngIf="maritalStatus == 'survivor'" class="inputexplanation">
          <p>If you are a widow(er) and you have not remarried (or you remarried after reaching age 60), there is no need for this calculator. Please see <a href="https://obliviousinvestor.com/social-security-planning-with-widower-benefits/" target="_blank">this article</a> for a discussion of the optimal claiming strategy.</p>
          <p>If you <em>have</em> remarried (prior to age 60) please use the calculator as "married."</p>
        </div>
        <ul *ngIf="maritalStatus == 'divorced'" class="inputexplanation">
            <li><strong>Note 1:</strong> If you have remarried, please use the calculator as "married."</li>
            <li><strong>Note 2:</strong> If you are divorced (and not remarried) after a marriage that lasted less than 10 years, please use the calculator as "single."</li>
        </ul>
        </div>
  <span *ngIf="maritalStatus != 'survivor'">

        <div class="form-inline">
        <label>Gender</label>
        <select [(ngModel)]="spouseAgender" name="spouseAgender" class="form-control">
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>
        </div>
        <div class="form-inline">
              <label>Date of birth</label>
              <select class="form-control" [(ngModel)]="spouseAinputMonth" name="spouseAinputMonth" required>
                <option *ngFor="let month of inputMonths" [value]="month">{{month}}</option>
              </select>
              <select class="form-control" [(ngModel)]="spouseAinputDay" name="spouseAinputDay" required>
                  <option *ngFor="let day of inputDays" [value]="day">{{day}}</option>
              </select>
              <select class="form-control" [(ngModel)]="spouseAinputYear" name="spouseAinputYear" required>
                  <option *ngFor="let year of inputYears" [value]="year">{{year}}</option>
              </select>
        </div>
        <div>
          <label>PIA</label>
          <input type="text" [(ngModel)]="spouseAPIA" name="spouseAPIA" required>
          <p class="inputexplanation">Your primary insurance amount (PIA) is the amount of your monthly retirement benefit, if you file for it at your full retirement age. You can get an estimate of your PIA from the SSA.gov website or from your Social Security statement.</p>
        </div>
        <div *ngIf="this.advanced == true" class="form-inline">
          <label>Mortality table</label>
          <select [(ngModel)]="spouseAmortalityInput" name="spouseAmortalityInput" class="form-control">
            <option value="NS1">2017 CSO Nonsmoker Super-preferred</option>
            <option value="NS2">2017 CSO Nonsmoker Preferred</option>
            <option value="SSA">2014 Social Security Period Life Table</option>
            <option value="SM1">2017 CSO Smoker Preferred</option>
            <option value="SM2">2017 CSO Smoker Residual Standard</option>
          </select>
          <p class="inputexplanation"><a href="about#mortality" target="_blank">See here</a> for more information about these mortality table options.</p>
        </div>
        <div *ngIf="maritalStatus == 'married' && this.advanced == true">
          <label for="spouseAgovernmentPension">Monthly government pension (from non-covered employment)</label>
          <input type="text" [(ngModel)]="spouseAgovernmentPension" id="spouseAgovernmentPension" name="spouseAgovernmentPension">
        </div>    


      <span *ngIf="maritalStatus == 'married' || maritalStatus == 'divorced'">

        <h2 *ngIf="maritalStatus == 'married'">Your Spouse's Information</h2>
        <h2 *ngIf="maritalStatus == 'divorced'">Your Ex-spouse's Information</h2>
        <div class="form-inline">
        <label>Gender</label>
        <select [(ngModel)]="spouseBgender" name="spouseBgender" class="form-control">
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>
        </div>
        <div class="form-inline">
          <label>Date of birth</label>
          <select class="form-control" [(ngModel)]="spouseBinputMonth" name="spouseBinputMonth" required>
            <option *ngFor="let month of inputMonths" [value]="month">{{month}}</option>
          </select>
          <select class="form-control" [(ngModel)]="spouseBinputDay" name="spouseBinputDay" required>
              <option *ngFor="let day of inputDays" [value]="day">{{day}}</option>
          </select>
          <select class="form-control" [(ngModel)]="spouseBinputYear" name="spouseBinputYear" required>
              <option *ngFor="let year of inputYears" [value]="year">{{year}}</option>
          </select>
        </div>
        <div>
          <label>PIA</label>
          <input type="text" [(ngModel)]="spouseBPIA" name="spouseBPIA" required>
        </div>
        <div *ngIf="maritalStatus == 'divorced'" class="form-inline">
            <label>Month in which your ex-spouse filed (or will file) for his/her retirement benefit:</label>
            <select class="form-control" [(ngModel)]="exSpouseRetirementBenefitMonth" name="exSpouseRetirementBenefitMonth" required>
              <option *ngFor="let month of inputMonths" [value]="month">{{month}}</option>
            </select>
            <select class="form-control" [(ngModel)]="exSpouseRetirementBenefitYear" name="exSpouseRetirementBenefitYear" required>
              <option *ngFor="let year of inputBenefitYears" [value]="year">{{year}}</option>
            </select>
            <span *ngIf="this.exSpouseRetirementDateError" class="alert alert-danger">{{this.exSpouseRetirementDateError}}</span>
            <p class="inputexplanation">This information is necessary in order to do the required math. If you do not know the answer, you can call the SSA to see if your ex-spouse has filed for his/her retirement benefit. Alternatively, you can guess as to your ex-spouse's plans (e.g., assume they file at age 66 or at age 67).</p>
          </div>
        <div *ngIf="this.advanced == true" class="form-inline">
          <label>Mortality table</label>
          <select [(ngModel)]="spouseBmortalityInput" name="spouseBmortalityInput" class="form-control">
            <option value="NS1">2017 CSO Nonsmoker Super-preferred</option>
            <option value="NS2">2017 CSO Nonsmoker Preferred</option>
            <option value="SSA">2014 Social Security Period Life Table</option>
            <option value="SM1">2017 CSO Smoker Preferred</option>
            <option value="SM2">2017 CSO Smoker Residual Standard</option>
          </select>
        </div>
        <div *ngIf="this.advanced == true">
            <label for="spouseBgovernmentPension">Monthly government pension (from non-covered employment)</label>
            <input type="text" [(ngModel)]="spouseBgovernmentPension" id="spouseBgovernmentPension" name="spouseBgovernmentPension">
        </div>
      </span>
        <div *ngIf="this.advanced == true">
          <h2>Other Inputs</h2>
          <label class="customtooltip">Real discount rate<span class="tooltiptext">As a decimal (0.01 for a 1% discount rate, for example).</span></label>
          <input type="text" [(ngModel)]="discountRate" name="discountRate" required>
          <p class="inputexplanation">A "discount rate" is necessary to reflect the fact that a dollar today is worth more than a dollar in the future, because a dollar today can be invested.
            The <a href="https://www.treasury.gov/resource-center/data-chart-center/interest-rates/Pages/TextView.aspx?data=realyield" target="_blank">yield on 20-year TIPS</a> is generally considered an appropriate discount rate for these purposes.
            See <a href="https://obliviousinvestor.com/claiming-social-security-early-to-invest-it-what-rate-of-return-discount-rate-should-we-assume/" target="_blank">this article</a> for a dicussion of that topic.</p>
        </div>
      <div>
        <button type="submit" id="maximizeSubmit" class="btn btn-primary" (mousedown)="waitCursor()">Submit</button>
      </div>
      <p *ngIf="!this.solutionSet.solutionPV">If you are married, depending on your computer/phone's processor speed, this calculation may take several seconds. Please be patient with your computer. It's doing quite a lot of math.</p>
      <p *ngIf="!this.solutionSet.solutionPV">For reference, this calculator runs much faster in Chrome or Firefox than it does in Safari, Edge, or Internet Explorer.</p>
  </span>
</form>
<span *ngIf="this.solutionSet.solutionPV">
  
  <ul>
    <li *ngIf="this.solutionSet.spouseAretirementSolutionDate">You should file for your retirement benefit to begin {{this.solutionSet.spouseAretirementSolutionDate.getMonth()+1}}/{{this.solutionSet.spouseAretirementSolutionDate.getFullYear()}}, at age {{this.solutionSet.spouseAretirementSolutionAgeYears}} and {{this.solutionSet.spouseAretirementSolutionAgeMonths}} months.</li>
    <li *ngIf="this.solutionSet.spouseAspousalSolutionDate">You should file for your spousal benefit to begin {{this.solutionSet.spouseAspousalSolutionDate.getMonth()+1}}/{{this.solutionSet.spouseAspousalSolutionDate.getFullYear()}}, at age {{this.solutionSet.spouseAspousalSolutionAgeYears}} and {{this.solutionSet.spouseAspousalSolutionAgeMonths}} months.</li>
    <li *ngIf="this.solutionSet.spouseBretirementSolutionDate">Your spouse should file for his/her retirement benefit to begin {{this.solutionSet.spouseBretirementSolutionDate.getMonth()+1}}/{{this.solutionSet.spouseBretirementSolutionDate.getFullYear()}}, at age {{this.solutionSet.spouseBretirementSolutionAgeYears}} and {{this.solutionSet.spouseBretirementSolutionAgeMonths}} months.</li>
    <li *ngIf="this.solutionSet.spouseBspousalSolutionDate">Your spouse should file for his/her spousal benefit to begin {{this.solutionSet.spouseBspousalSolutionDate.getMonth()+1}}/{{this.solutionSet.spouseBspousalSolutionDate.getFullYear()}}, at age {{this.solutionSet.spouseBspousalSolutionAgeYears}} and {{this.solutionSet.spouseBspousalSolutionAgeMonths}} months.</li>
  </ul>
  <span  *ngIf="this.solutionSet.solutionPV">
  <p>The present value of this proposed solution would be <strong>{{this.solutionSet.solutionPV.toLocaleString('en-US', {style: 'currency', currency: 'USD', minimumFractionDigits:0, maximumFractionDigits:0})}}</strong>.</p>
  <p> This means that with this strategy you could expect to receive, on average, {{this.solutionSet.solutionPV.toLocaleString('en-US', {style: 'currency',currency: 'USD', minimumFractionDigits:0, maximumFractionDigits:0})}} of total Social Security benefits over the course of your lifetime, after adjusting for the fact that a dollar received in the future is worth less than a dollar received today, because you would miss out on investment returns in the interim.
    (<a href="https://obliviousinvestor.com/what-does-present-value-mean/" target="_blank">See this article</a> for more thorough explanation of the "present value" concept.)</p>
  </span>
  <hr>

  <form #customDateForm="ngForm" (ngSubmit)="customDates()">
  <h2>Test an alternative claiming strategy:</h2>
  <div class="form-inline">
      <label>Your month/year to claim retirement benefit:</label>
      <select class="form-control" [(ngModel)]="spouseAretirementBenefitMonth" name="spouseAretirementBenefitMonth" required>
        <option *ngFor="let month of inputMonths" [value]="month">{{month}}</option>
      </select>
      <select class="form-control" [(ngModel)]="spouseAretirementBenefitYear" name="spouseAretirementBenefitYear" required>
        <option *ngFor="let year of inputBenefitYears" [value]="year">{{year}}</option>
      </select>
      <span *ngIf="this.spouseAretirementDateError" class="alert alert-danger">{{this.spouseAretirementDateError}}</span>
    </div>
    <span *ngIf="maritalStatus == 'married'">
        <div class="form-inline" *ngIf="this.spouseAPIA < 0.5 * this.spouseBPIA || this.spouseAactualBirthDate < this.deemedFilingCutoff">
          <label>Your month/year to claim spousal benefit:</label>
          <select class="form-control" [(ngModel)]="spouseAspousalBenefitMonth" name="spouseAspousalBenefitMonth" required>
            <option *ngFor="let month of inputMonths" [value]="month">{{month}}</option>
          </select>
          <select class="form-control" [(ngModel)]="spouseAspousalBenefitYear" name="spouseAspousalBenefitYear" required>
            <option *ngFor="let year of inputBenefitYears" [value]="year">{{year}}</option>
          </select>
          <span *ngIf="this.spouseAspousalDateError" class="alert alert-danger">{{this.spouseAspousalDateError}}</span>
        </div>
        <div class="form-inline">
            <label>Your spouse's month/year to claim retirement benefit:</label>
            <select class="form-control" [(ngModel)]="spouseBretirementBenefitMonth" name="spouseBretirementBenefitMonth" required>
              <option *ngFor="let month of inputMonths" [value]="month">{{month}}</option>
            </select>
            <select class="form-control" [(ngModel)]="spouseBretirementBenefitYear" name="spouseBretirementBenefitYear" required>
              <option *ngFor="let year of inputBenefitYears" [value]="year">{{year}}</option>
            </select>
            <span *ngIf="this.spouseBretirementDateError" class="alert alert-danger">{{this.spouseBretirementDateError}}</span>
          </div>
          <div class="form-inline" *ngIf="this.spouseBPIA < 0.5 * this.spouseAPIA || this.spouseBactualBirthDate < this.deemedFilingCutoff">
            <label>Your spouse's month/year to claim spousal benefit:</label>
            <select class="form-control" [(ngModel)]="spouseBspousalBenefitMonth" name="spouseBspousalBenefitMonth" required>
              <option *ngFor="let month of inputMonths" [value]="month">{{month}}</option>
            </select>
            <select class="form-control" [(ngModel)]="spouseBspousalBenefitYear" name="spouseBspousalBenefitYear" required>
              <option *ngFor="let year of inputBenefitYears" [value]="year">{{year}}</option>
            </select>
            <span *ngIf="this.spouseBspousalDateError" class="alert alert-danger">{{this.spouseBspousalDateError}}</span>
          </div>
      </span>
    <div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </div>
    <span *ngIf="this.customPV">
      The present value of the strategy you selected is {{this.customPV.toLocaleString('en-US', {style: 'currency',currency: 'USD', minimumFractionDigits:0, maximumFractionDigits:0})}}, as compared to a present value of {{this.solutionSet.solutionPV.toLocaleString('en-US', {style: 'currency',currency: 'USD', minimumFractionDigits:0, maximumFractionDigits:0})}} from the recommended strategy.
    </span>
  </form>
</span>
</div>